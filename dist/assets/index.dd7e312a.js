import{d as e,e6 as a,eb as s,ec as l,p as o,g as r,o as n,b as t,ep as d,u as c,l as i,r as u,h as m,f as p,w as f,eH as g,ee as h}from"./vendor.683ef58e.js";import{u as v}from"./index.0d55dbf5.js";var b=e({emits:["update:modelValue","change"],setup(e,{emit:o}){const r=a(""),n=a(""),t=s("service"),d=()=>{t.common.captcha({height:36,width:110}).then((({captchaId:e,data:a})=>{a.includes(";base64,")?r.value=a:n.value=a,o("update:modelValue",e),o("change",{base64:r,svg:n,captchaId:e})})).catch((e=>{l.error(e)}))};return d(),{base64:r,svg:n,refresh:d}}});o("data-v-a83b90d6");const w=["innerHTML"],y=["src"];r(),b.render=function(e,a,s,l,o,r){return n(),t("div",{class:"login-captcha",onClick:a[0]||(a[0]=(...a)=>e.refresh&&e.refresh(...a))},[e.svg?(n(),t("div",{key:0,class:"svg",innerHTML:e.svg},null,8,w)):(n(),t("img",{key:1,class:"base64",src:e.base64,alt:""},null,8,y))])},b.__scopeId="data-v-a83b90d6";var V=e({components:{Captcha:b},setup(){const e=d(),s=c(),{refs:o,setRefs:r}=v(),n=a(!1),t=i({username:"admin",password:"123456",captchaId:"",verifyCode:""});return{refs:o,form:t,saving:n,toLogin:async function(){if(!t.username)return l.warning("用户名不能为空");if(!t.password)return l.warning("密码不能为空");n.value=!0;try{await s.dispatch("userLogin",t);const[a]=await s.dispatch("permMenu");a?e.push("/"):l.error("该账号没有权限")}catch(a){l.error(a),o.value.captcha.refresh()}n.value=!1},setRefs:r}}});o("data-v-228fe740");const _={class:"login-bg"},C={class:"page-login"},I={class:"box"},k={class:"login-wrapper"},x={class:"login-screen"},L={class:"well"},z=m("div",{class:"login-head"},[m("img",{src:"/login-head.png",style:{width:"100%"}})],-1),U={class:"login-form"},H=m("img",{id:"profile-img",class:"profile-img-card",src:"/avatar.png"},null,-1),M=m("p",{id:"profile-name",class:"profile-name-card"},null,-1),R=m("i",{class:"el-icon-s-custom"},null,-1),j=m("i",{class:"el-icon-key"},null,-1),K=h("登录 ");r(),V.render=function(e,a,s,l,o,r){const d=u("el-input"),c=u("el-form-item"),i=u("captcha"),h=u("el-form"),v=u("el-button");return n(),t("div",_,[m("div",C,[m("div",I,[m("div",k,[m("div",x,[m("div",L,[z,m("div",U,[H,M,p(h,{class:"form",size:"medium",disabled:e.saving},{default:f((()=>[p(c,null,{default:f((()=>[p(d,{modelValue:e.form.username,"onUpdate:modelValue":a[0]||(a[0]=a=>e.form.username=a),placeholder:"请输入用户名",maxlength:"32",size:"small","auto-complete":"off"},{prepend:f((()=>[R])),_:1},8,["modelValue"])])),_:1}),p(c,null,{default:f((()=>[p(d,{modelValue:e.form.password,"onUpdate:modelValue":a[1]||(a[1]=a=>e.form.password=a),type:"password",placeholder:"请输入密码",maxlength:"16",size:"small","auto-complete":"off"},{prepend:f((()=>[j])),_:1},8,["modelValue"])])),_:1}),p(c,{label:"验证码",class:"captcha"},{default:f((()=>[p(d,{modelValue:e.form.verifyCode,"onUpdate:modelValue":a[2]||(a[2]=a=>e.form.verifyCode=a),placeholder:"请输入图片验证码",maxlength:"5","auto-complete":"off",onKeyup:g(e.toLogin,["enter"])},null,8,["modelValue","onKeyup"]),p(i,{ref:e.setRefs("captcha"),modelValue:e.form.captchaId,"onUpdate:modelValue":a[3]||(a[3]=a=>e.form.captchaId=a),class:"value",onChange:a[4]||(a[4]=()=>{e.form.verifyCode=""})},null,8,["modelValue"])])),_:1})])),_:1},8,["disabled"]),p(v,{style:{width:"100%"},size:"small",class:"submit-btn",loading:e.saving,onClick:e.toLogin},{default:f((()=>[K])),_:1},8,["loading","onClick"])])])])])])])])},V.__scopeId="data-v-228fe740";export default V;
